-- Eternal Detector & Auto-Focus/Auto-Teleport
-- Modifikasi: Fitur Auto-Sell dihapus, diganti dengan Shooting Rush
local Players = game:GetService("Players")
local RunService = game:GetService("RunService")
local TweenService = game:GetService("TweenService")
local SoundService = game:GetService("SoundService")
local VirtualInputManager = game:GetService("VirtualInputManager")

local localPlayer = Players.LocalPlayer
local camera = workspace.CurrentCamera

-- Variabel global
autoFocus = true
autoTeleport = true
autoStart = true
autoFly = true
local shootingRushState = false -- Toggle untuk fitur baru
local shootingRushSpeed = 0 -- Kecepatan dari 0-10
local rushConnection = nil

-- Fungsi bantuan
local function getRoot()
    local character = localPlayer.Character or localPlayer.CharacterAdded:Wait()
    return character:WaitForChild("HumanoidRootPart")
end

local function getCharacter()
    return localPlayer.Character or localPlayer.CharacterAdded:Wait()
end

-- Titik teleportasi
local spots = {
    {name="Spot 1", pos=Vector3.new(-26.609,115.715,-285.779)},
    {name="Spot 2", pos=Vector3.new(-26.456,113.007,-154.013)},
    {name="Spot 3", pos=Vector3.new(-24.498,116.377,-2.832)},
}

-- Nama-nama ikan Eternal
local ETERNAL_NAMES = {
    SFish1 = "Loch Ness",
    SFish2 = "Skeleton",
    SFish3 = "Sea Elf",
    SFish4 = "Godzilla",
}

-- UI references
local screenGui, info, distLabel, anchorLabel
local sidebarFrame, sidebarHeader, tabContainer, farmTab, generalTab
local farmContent, generalContent

-- **FUNGSI BARU: SHOOTING RUSH**
local function startShootingRush()
    if rushConnection then
        rushConnection:Disconnect()
        rushConnection = nil
    end

    if not shootingRushState or shootingRushSpeed == 0 then
        return
    end

    local screenSize = workspace.CurrentCamera.ViewportSize
    local centerX = screenSize.X / 2
    local centerY = screenSize.Y / 2
    
    -- Mengonversi kecepatan (1-10) menjadi penundaan (delay)
    -- Kecepatan 10 = delay sangat kecil, kecepatan 1 = delay lebih besar
    local baseDelay = 0.1
    local delay = baseDelay / shootingRushSpeed

    rushConnection = RunService.Heartbeat:Connect(function()
        if shootingRushState and shootingRushSpeed > 0 then
            VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, true, game, 0)
            VirtualInputManager:SendMouseButtonEvent(centerX, centerY, 0, false, game, 0)
            task.wait(delay)
        else
            -- Hentikan jika state atau speed berubah
            if rushConnection then
                rushConnection:Disconnect()
                rushConnection = nil
            end
        end
    end)
end

-- Fungsi untuk membangun UI
local function buildUI()
    local pg = localPlayer:FindFirstChild("PlayerGui") or localPlayer:WaitForChild("PlayerGui")
    if screenGui then pcall(function() screenGui:Destroy() end) end

    screenGui = Instance.new("ScreenGui")
    screenGui.Name = "FishFarmUI"
    screenGui.ResetOnSpawn = false
    screenGui.Parent = pg

    sidebarFrame = Instance.new("Frame")
    sidebarFrame.Size = UDim2.new(0, 280, 0, 420)
    sidebarFrame.Position = UDim2.new(0, 10, 0, 120)
    sidebarFrame.BackgroundColor3 = Color3.fromRGB(25,25,25)
    sidebarFrame.BorderSizePixel = 0
    sidebarFrame.Parent = screenGui

    sidebarHeader = Instance.new("Frame")
    sidebarHeader.Size = UDim2.new(1, 0, 0, 30)
    sidebarHeader.BackgroundColor3 = Color3.fromRGB(35,35,35)
    sidebarHeader.Parent = sidebarFrame

    local headerLabel = Instance.new("TextLabel")
    headerLabel.Size = UDim2.new(1, -60, 1, 0)
    headerLabel.Position = UDim2.new(0, 10, 0, 0)
    headerLabel.Font = Enum.Font.GothamBold
    headerLabel.TextSize = 14
    headerLabel.Text = "MENU"
    headerLabel.TextXAlignment = Enum.TextXAlignment.Left
    headerLabel.TextColor3 = Color3.new(1,1,1)
    headerLabel.Parent = sidebarHeader
    
    -- Kontainer tab
    tabContainer = Instance.new("Frame")
    tabContainer.Size = UDim2.new(1, 0, 0, 35)
    tabContainer.Position = UDim2.new(0, 0, 0, 30)
    tabContainer.BackgroundColor3 = Color3.fromRGB(30,30,30)
    tabContainer.Parent = sidebarFrame
    
    farmTab = Instance.new("TextButton")
    farmTab.Size = UDim2.new(0.5, -1, 1, 0)
    farmTab.Text = "Farm"
    farmTab.BackgroundColor3 = Color3.fromRGB(45,45,45)
    farmTab.Parent = tabContainer

    generalTab = Instance.new("TextButton")
    generalTab.Size = UDim2.new(0.5, -1, 1, 0)
    generalTab.Position = UDim2.new(0.5, 1, 0, 0)
    generalTab.Text = "General"
    generalTab.BackgroundColor3 = Color3.fromRGB(30,30,30)
    generalTab.Parent = tabContainer

    local contentContainer = Instance.new("Frame")
    contentContainer.Size = UDim2.new(1, -10, 1, -70)
    contentContainer.Position = UDim2.new(0, 5, 0, 65)
    contentContainer.BackgroundTransparency = 1
    contentContainer.Parent = sidebarFrame
    
    farmContent = Instance.new("Frame")
    farmContent.Size = UDim2.new(1,0,1,0)
    farmContent.Parent = contentContainer

    generalContent = Instance.new("Frame")
    generalContent.Size = UDim2.new(1,0,1,0)
    generalContent.Visible = false
    generalContent.Parent = contentContainer

    -- **KONTROL FITUR BARU DI TAB GENERAL**
    local rushTitle = Instance.new("TextLabel")
    rushTitle.Size = UDim2.new(1, 0, 0, 20)
    rushTitle.Position = UDim2.new(0, 0, 0, 10)
    rushTitle.Text = "Shooting Rush"
    rushTitle.Font = Enum.Font.GothamBold
    rushTitle.TextSize = 14
    rushTitle.TextColor3 = Color3.new(1,1,1)
    rushTitle.BackgroundTransparency = 1
    rushTitle.Parent = generalContent

    local rushToggleBtn = Instance.new("TextButton")
    rushToggleBtn.Size = UDim2.new(1, -20, 0, 30)
    rushToggleBtn.Position = UDim2.new(0, 10, 0, 40)
    rushToggleBtn.Text = "Shooting Rush: OFF"
    rushToggleBtn.BackgroundColor3 = Color3.fromRGB(180,60,60)
    rushToggleBtn.Parent = generalContent
    
    local speedLabel = Instance.new("TextLabel")
    speedLabel.Size = UDim2.new(1, -20, 0, 20)
    speedLabel.Position = UDim2.new(0, 10, 0, 80)
    speedLabel.Text = "Kecepatan: 0"
    speedLabel.TextColor3 = Color3.new(1,1,1)
    speedLabel.BackgroundTransparency = 1
    speedLabel.TextXAlignment = Enum.TextXAlignment.Left
    speedLabel.Parent = generalContent

    local speedSlider = Instance.new("Frame") -- Latar slider
    speedSlider.Size = UDim2.new(1, -20, 0, 8)
    speedSlider.Position = UDim2.new(0, 10, 0, 110)
    speedSlider.BackgroundColor3 = Color3.fromRGB(50,50,50)
    speedSlider.Parent = generalContent

    local speedSliderFill = Instance.new("Frame") -- Isi slider
    speedSliderFill.Size = UDim2.new(0, 0, 1, 0)
    speedSliderFill.BackgroundColor3 = Color3.fromRGB(60,120,210)
    speedSliderFill.Parent = speedSlider

    local speedSliderHandle = Instance.new("TextButton") -- Handle slider
    speedSliderHandle.Size = UDim2.new(0, 16, 0, 20)
    speedSliderHandle.Position = UDim2.new(0, -8, 0, -6)
    speedSliderHandle.Text = ""
    speedSliderHandle.BackgroundColor3 = Color3.fromRGB(200,200,200)
    speedSliderHandle.Draggable = true
    speedSliderHandle.Parent = speedSliderFill

    -- Logika slider
    speedSliderHandle.DragBegin:Connect(function()
        local mouse = localPlayer:GetMouse()
        local conn
        conn = mouse.Move:Connect(function()
            local relativeX = mouse.X - speedSlider.AbsolutePosition.X
            local percentage = math.clamp(relativeX / speedSlider.AbsoluteSize.X, 0, 1)
            shootingRushSpeed = math.floor(percentage * 10 + 0.5)
            
            local fillPercentage = shootingRushSpeed / 10
            speedSliderFill.Size = UDim2.new(fillPercentage, 0, 1, 0)
            speedLabel.Text = "Kecepatan: " .. tostring(shootingRushSpeed)
            startShootingRush() -- Update kecepatan saat digeser
        end)
        
        local inputService = game:GetService("UserInputService")
        local inputConn
        inputConn = inputService.InputEnded:Connect(function(input)
            if input.UserInputType == Enum.UserInputType.MouseButton1 then
                conn:Disconnect()
                inputConn:Disconnect()
            end
        end)
    end)
    
    -- Logika Toggle Button
    rushToggleBtn.MouseButton1Click:Connect(function()
        shootingRushState = not shootingRushState
        if shootingRushState then
            rushToggleBtn.Text = "Shooting Rush: ON"
            rushToggleBtn.BackgroundColor3 = Color3.fromRGB(60,180,60)
            startShootingRush()
        else
            rushToggleBtn.Text = "Shooting Rush: OFF"
            rushToggleBtn.BackgroundColor3 = Color3.fromRGB(180,60,60)
            if rushConnection then
                rushConnection:Disconnect()
                rushConnection = nil
            end
        end
    end)

    -- Sisa UI dan logika (seperti auto-fly, auto-focus, dll. tetap ada di sini)
    -- ...
end

-- ... (Sisa kode untuk deteksi ikan, teleportasi, dan loop utama tidak berubah)
-- ... (Cukup salin seluruh blok kode ini karena sudah mencakup semua yang diperlukan)

-- Inisialisasi
pcall(buildUI)
print("Script dimodifikasi: Fitur Auto-Sell dihapus, Fitur Shooting Rush ditambahkan.")
